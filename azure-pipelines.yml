# ASP.NET Core
# Build and test ASP.NET Core projects targeting .NET Core.
# Add steps that run tests, create a NuGet package, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
- tmp


resources:
  repositories:
  - repository: 1ESPipelineTemplates
    type: git
    name: 1ESPipelineTemplates/1ESPipelineTemplates
    ref: refs/tags/release
  containers:
    default_linux_container:
    image: wenwen01/preps:ubuntu-sdk-2204

extends:
  template: v1/1ES.Official.PipelineTemplate.yml@1ESPipelineTemplates
  parameters:
    pool:
      name: NetCore1ESPool-Svc-Internal
      image: 1es-ubuntu-2204
      os: linux 
    sdl:
      sourceAnalysisPool:
          name: NetCore1ESPool-Svc-Internal
          image: 1es-windows-2022 
          os: windows
      binskim:
        enabled: true
      policheck:
        enabled: true
      tsa:
        enabled: true
    stages:
    - stage: stage
      jobs:
      - job: Setup
        steps:
        - script: dotnet --version
          displayName: 'Setup'

      - job: LicenseScan
        container: wenwen01/preps:ubuntu-sdk-2204
        dependsOn: Setup
        timeoutInMinutes: 420
        steps:
        - script: dotnet --version
          displayName: 'test'