# ASP.NET Core
# Build and test ASP.NET Core projects targeting .NET Core.
# Add steps that run tests, create a NuGet package, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
  branches:
    include:
    - tmp

pr: none

extends:
  template: 1es.yml@self
  parameters:
    containers:
      azurelinuxSourceBuildTestContainer:
        image: mcr.microsoft.com/dotnet-buildtools/prereqs:azurelinux-3.0-net10.0-source-build-test-amd64
    stages:
      - stage: Stage
        jobs:
          - job: Setup
            container: azurelinuxSourceBuildTestContainer
            displayName: Setup Job
            steps:
              - script: |
                  whoami
                  echo "ls -l scancode"
                  ls -l /usr/local/bin/scancode
                  echo "su root"
                  su root -c "chmod 755 /usr/local/bin/scancode"
                  echo "scancode --version"
                  scancode --version
                displayName: 'Setup'

          # - job: LicenseScan1
          #   container: azurelinuxSourceBuildTestContainer
          #   displayName: LicenseScan Job1
          #   dependsOn: Setup
          #   steps:
          #     - script: |
          #         echo "scancode --version"
          #         scancode --version
          #       displayName: 'test1'

          # - job: LicenseScan2
          #   container: azurelinuxSourceBuildTestContainer
          #   displayName: LicenseScan Job2
          #   dependsOn: Setup
          #   steps:
          #     - script: |
          #         echo "scancode --version"
          #         scancode --version
          #       displayName: 'test2'

          # - job: LicenseScan3
          #   container: azurelinuxSourceBuildTestContainer
          #   displayName: LicenseScan Job3
          #   dependsOn: Setup
          #   steps:
          #     - script: |
          #         echo "scancode --version"
          #         scancode --version
          #       displayName: 'test3'
# pool:
#   vmImage: Ubuntu-latest

# stages:
#   - stage: Stage
#     jobs:
#     - job: Steup
#       container: wenwen01/preps:azurelinux-source
#       displayName: Setup Job
#       steps:
#       - script: |
#           echo "test"
#         displayName: 'Steup'